{"version":3,"file":"qrcode-BnRsPtTt.js","sources":["../../../.svelte-kit/adapter-node/chunks/qrcode.js"],"sourcesContent":["import qrImage from \"qr-image\";\nimport fs from \"fs\";\nimport { c as connection, d as data, o as ora } from \"./login.js\";\nasync function generate_qrcode(user, filedata) {\n  try {\n    let qrcode_path;\n    let filepath = \"files/\";\n    const result = await connection.execute(\"INSERT INTO qrcodes(`id_user`, `title`, `data`, `ora`, `stato`) VALUES (?, ?, ?, ?, ?)\", [user.id, filedata.title, data(), ora(), filedata.stato]);\n    const insertedId = result[0].insertId;\n    qrcode_path = `qrcodes/qrcode_${insertedId}.png`;\n    filepath += `file_${insertedId}`;\n    const qrcode_text = \"https://qrcode.rizzolo.cloud/api/get_qrcode/\" + insertedId;\n    const qr_png = qrImage.imageSync(qrcode_text, { type: \"png\" });\n    fs.writeFileSync(qrcode_path, qr_png);\n    fs.writeFileSync(filepath, JSON.stringify(filedata));\n    const qrcode_image = fs.readFileSync(qrcode_path);\n    const base64_qrcode = qrcode_image.toString(\"base64\");\n    return base64_qrcode;\n  } catch (error) {\n    console.error(\"Error:\", error);\n    throw error;\n  }\n}\nasync function mine_qrcodes(id_user) {\n  const result = await connection.execute(\"SELECT * FROM qrcodes WHERE id_user=?\", [id_user]);\n  var qrcodes = result[0];\n  for (let i = 0; i < qrcodes.length; i++) {\n    var file = \"qrcodes/qrcode_\" + qrcodes[i].id + \".png\";\n    if (fs.existsSync(file)) {\n      qrcodes[i][\"qrcode\"] = fs.readFileSync(file).toString(\"base64\");\n    } else {\n      qrcodes[i][\"qrcode\"] = \"\";\n    }\n  }\n  return qrcodes;\n}\nexport {\n  generate_qrcode as g,\n  mine_qrcodes as m\n};\n"],"names":[],"mappings":";;;;AAGA,eAAe,eAAe,CAAC,IAAI,EAAE,QAAQ,EAAE;AAC/C,EAAE,IAAI;AACN,IAAI,IAAI,WAAW,CAAC;AACpB,IAAI,IAAI,QAAQ,GAAG,QAAQ,CAAC;AAC5B,IAAI,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,OAAO,CAAC,wFAAwF,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,QAAQ,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,GAAG,EAAE,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;AAChM,IAAI,MAAM,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;AAC1C,IAAI,WAAW,GAAG,CAAC,eAAe,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC;AACrD,IAAI,QAAQ,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC;AACrC,IAAI,MAAM,WAAW,GAAG,8CAA8C,GAAG,UAAU,CAAC;AACpF,IAAI,MAAM,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,WAAW,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;AACnE,IAAI,EAAE,CAAC,aAAa,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;AAC1C,IAAI,EAAE,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;AACzD,IAAI,MAAM,YAAY,GAAG,EAAE,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;AACtD,IAAI,MAAM,aAAa,GAAG,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC1D,IAAI,OAAO,aAAa,CAAC;AACzB,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;AACnC,IAAI,MAAM,KAAK,CAAC;AAChB,GAAG;AACH,CAAC;AACD,eAAe,YAAY,CAAC,OAAO,EAAE;AACrC,EAAE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,OAAO,CAAC,uCAAuC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;AAC9F,EAAE,IAAI,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAC1B,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC3C,IAAI,IAAI,IAAI,GAAG,iBAAiB,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,MAAM,CAAC;AAC1D,IAAI,IAAI,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;AAC7B,MAAM,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACtE,KAAK,MAAM;AACX,MAAM,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;AAChC,KAAK;AACL,GAAG;AACH,EAAE,OAAO,OAAO,CAAC;AACjB;;;;"}